# Test generated by RoostGPT for test nobelmaster-azureopenai using AI Type Azure Open AI and AI Model roost-gpt4-32k

# RoostTestHash=401558435a

config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
   - duration: 60
     arrivalRate: 5
  payload:
    path: "laureates_get.csv"
    fields: ["offset", "limit", "sort", "ID", "name", "gender", "motivation", "affiliation", "residence", "birthDate", "birthDateTo", "deathDate",
     "deathDateTo", "foundedDate", "birthCity", "birthCountry", "birthContinent", "deathCity", "deathCountry", "deathContinent", "foundedCity",
     "foundedCountry", "foundedContinent","HeadquartersCity","HeadquartersCountry","HeadquartersContinent","nobelPrizeYear", "yearTo",
     "nobelPrizeCategory", "format", "csvLang"]
    skipHeader: true
  ensure:
    p99: 200
  plugins:
    expect: {}

scenarios:
  - name: "Successful API Request"
    flow:
      - get:
          url: "/laureates"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 200
            - hasProperty: "meta"
            - hasProperty: "laureates"
            - hasProperty: "links"

  - name: "API Request with validation failure"
    flow:
      - get:
          url: "/not-valid"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          expect:
            - statusCode: 400
            - bodyContains: 
              - "Bad request"
              - "modifications needed"

  - name: "API Request with edge case"
    flow:
      - get:
          url: "/laureates"
          headers:
            Authorization: "{{ $processEnvironment.AUTH_TOKEN }}"
          qs:
            offset: 9999999999
            limit: 1
          expect:
            - statusCode: [200, 400, 404, 422]
            - hasProperty: "meta"
            - hasProperty: "laureates"
            - hasProperty: "links"
